# PyStockBot UI Dashboard

A modern React dashboard for visualizing machine learning predictions and market indicators from the PyStockBot stock prediction system.

## Overview

The UI provides multiple specialized dashboards for financial data visualization:
- **Market Indicators** - Technical analysis charts and market trends
- **ML Predictions** - Machine learning model outputs and forecasts
- **Social Sentiment** - Market sentiment analysis from social media
- **Asset Tracking** - Portfolio management and watchlist functionality
- **Earnings Analysis** - Company earnings data and predictions
- **Insider Tracking** - Corporate insider trading activity
- **News Feed** - Market news and event tracking

## Tech Stack

- **Framework**: Next.js 15 with React 19
- **Styling**: Tailwind CSS with custom design system
- **UI Components**: Radix UI primitives with shadcn/ui
- **Charts**: Recharts for financial data visualization
- **Database**: PostgreSQL for user data management
- **TypeScript**: Full type safety with Zod validation

## Quick Start

### Prerequisites

- Node.js 18+ 
- PostgreSQL database
- Python ML pipeline (see main project README)

### Installation

```bash
cd ui
npm install --legacy-peer-deps
```

### Database Setup

1. Create PostgreSQL database:
```bash
createdb pystockbot
```

2. Configure environment variables:
```bash
cp .env.example .env
# Edit DATABASE_URL in .env file
```

3. Run database migrations:
```bash
npm run db:migrate
```

### Development

```bash
npm run dev     # Start development server
npm run build   # Build for production
npm run start   # Start production server
npm run lint    # Run ESLint
```

The dashboard will be available at `http://localhost:3000`.

## Project Structure

```
ui/
├── app/                    # Next.js app router
│   ├── api/               # API routes for database operations
│   ├── portfolio/         # Portfolio management page
│   ├── dashboard-popout/  # Standalone dashboard view
│   └── globals.css        # Global styles and CSS variables
├── components/
│   ├── dashboards/        # Specialized dashboard components
│   ├── portfolio/         # Portfolio management components
│   └── ui/               # Reusable UI components (shadcn/ui)
├── lib/
│   ├── db.ts             # Database connection and queries
│   └── hooks/            # React hooks for data management
└── scripts/
    └── migrate.ts        # Database migration script
```

## Features

### Dashboard Components

Each dashboard is a self-contained React component:

- **Market Indicator Dashboard** (`market-indicator-dashboard.tsx`) - Technical indicators, price charts, volume analysis
- **ML Indicator Dashboard** (`ml-indicator-dashboard.tsx`) - Model predictions, confidence scores, feature importance
- **Social Sentiment Dashboard** (`social-sentiment-dashboard.tsx`) - Sentiment analysis from social platforms
- **Asset Tracking Dashboard** (`asset-tracking-dashboard.tsx`) - Portfolio tracking, watchlists, asset performance
- **Earnings Analysis Dashboard** (`earnings-analysis-dashboard.tsx`) - Earnings reports, guidance, estimates
- **Insider Tracking Dashboard** (`insider-tracking-dashboard.tsx`) - Insider trading activity and patterns
- **News Feed Dashboard** (`news-feed-dashboard.tsx`) - Market news aggregation and analysis

### Portfolio Management

- User asset tracking with PostgreSQL storage
- Watchlist creation and management
- Real-time portfolio performance metrics
- Custom asset grouping and tagging

### Design System

Professional financial UI with:
- Custom color palette optimized for data visualization
- Typography: Source Sans Pro (body) + Playfair Display (headings)
- Dark/light theme support
- Responsive layouts for desktop and mobile
- Consistent chart styling and data presentation

## Database Schema

### User Assets
```sql
user_assets (
  id SERIAL PRIMARY KEY,
  symbol VARCHAR(10) NOT NULL,
  name VARCHAR(255),
  asset_type VARCHAR(20) DEFAULT 'stock',
  created_at TIMESTAMP DEFAULT NOW()
);
```

### Watchlists
```sql
watchlists (
  id SERIAL PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  description TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);

watchlist_assets (
  watchlist_id INTEGER REFERENCES watchlists(id),
  asset_id INTEGER REFERENCES user_assets(id),
  PRIMARY KEY (watchlist_id, asset_id)
);
```

## API Endpoints

- `GET /api/assets` - Retrieve user assets
- `POST /api/assets` - Add new asset
- `DELETE /api/assets` - Remove asset
- `GET /api/watchlists` - Get all watchlists
- `POST /api/watchlists` - Create watchlist
- `POST /api/watchlists/[id]/assets` - Add asset to watchlist

## Integration with ML Pipeline

The UI dashboard displays data generated by the Python ML pipeline:

1. **Data Flow**: ML pipeline generates predictions and saves to `stonks/data/`
2. **API Integration**: Next.js API routes read ML output files
3. **Real-time Updates**: Dashboard components fetch latest predictions
4. **Visualization**: Charts display technical indicators, model outputs, and forecasts

## Configuration

### Environment Variables

```bash
# Required
DATABASE_URL="postgresql://user:pass@host:port/database"

# Optional
NEXT_PUBLIC_ANALYTICS_ID="your-analytics-id"
```

### Styling Customization

Global CSS variables in `app/globals.css`:

```css
:root {
  --primary: #0891b2;      /* Cyan-600 */
  --secondary: #f97316;    /* Orange-500 */
  --accent: #8b5cf6;       /* Violet-500 */
  /* ... more variables */
}
```

## Development Guidelines

- Follow existing component patterns in `components/dashboards/`
- Use TypeScript interfaces for all data structures
- Implement responsive design with Tailwind utilities
- Keep dashboard components modular and reusable
- Use React hooks for data management (`use-user-assets.ts`, `use-watchlists.ts`)
- Follow the established design system and color palette

## Deployment

### Production Build

```bash
npm run build
npm run start
```

### Database Migration

For production deployments, run migrations:

```bash
npx tsx scripts/migrate.ts
```

The UI can be deployed to Vercel, Netlify, or any Node.js hosting platform with PostgreSQL database support.